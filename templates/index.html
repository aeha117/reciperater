[[extend 'layout.html']]

<style>
    [v-cloak] {
        display: none;
    }
</style>


<div class="section" id="vue-target" v-cloak>
    <!-- Put here your Vue.js template -->
    <div class="block" id="search" name="search">
        <div class="columns">
            <div class="column">
                <input v-model="searchbar_val" id="search_bar" class="input is-fullwidth"
                                       placeholder="Filter">
            </div>
            <div class="column is-narrow">
                <button class="button is-primary">Add Recipe</button>
            </div>
        </div>
    </div>

    <div class="block">

        <div class="columns is-multiline">
            <div class="column is-half-tablet is-one-third-desktop" v-for="recipe in recipes">
                <div class="card">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <img src="https://bulma.io/images/placeholders/1280x960.png"
                                 alt="Placeholder image">
                        </figure>
                    </div>
                    <div class="card-content">
                        <!--<div class="media-left">
                            <figure class="image is-48x48">
                                <img src="https://bulma.io/images/placeholders/96x96.png" alt="Placeholder image">
                            </figure>
                        </div>-->
                        <div class="block">
                            <div class="columns is-mobile">
                                <div class="column">
                                    <p class="title is-4">{{ recipe.recipe_name }}</p>
                                    <p class="subtitle is-6">{{ recipe.user_email }}</p>
                                </div>
                                <div class="column is-narrow is-right">
                                        <span class="subtitle is-6"><span class="icon"><i
                                                class="fa fa-thumbs-o-up"></i></span>{{ recipe.recipe_likes }}</span>
                                    <span class="subtitle is-6"><span class="icon"><i
                                            class="fa fa-thumbs-o-down"></i></span>{{ recipe.recipe_dislikes }}</span>
                                </div>
                            </div>
                        </div>

                        <div class="content">
                            {{ recipe.recipe_content.substring(0,150) }}{{ (recipe.recipe_content.length > 150) ? '... ' : ' ' }}
                            <a v-for="tag in recipe.tags" @click="select_tag(recipe._idx,tag._idx)">#{{ tag.tag_name }} </a>
                            <br>
                            <time v-bind:datetime="recipe.date_created">{{ recipe.createdDate.toUTCString() }}</time>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
</div>


[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let user_email = "[[=XML(user_email)]]";
    let get_recipes_url = "[[=XML(get_recipes_url)]]";
    let get_tags_url = "[[=XML(get_tags_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]
